theme = "manual"

[editor]
mouse=false
auto-pairs = false

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.whitespace.render]
space = "none"
tab = "all"
newline = "all"

[editor.whitespace.characters]
space = "·"
nbsp = "⍽"
tab = "→"
#newline = "⏎"
newline = "·"
tabpad = "→" # Tabs will look like "→···" (depending on tab width)

[editor.soft-wrap]
enable = true

[keys.insert]
"C-d" = [
  ":insert-output echo -n `date +\"%Y-%m-%d\"`",
  "ensure_selections_forward",
  "move_char_right",
]

[keys.normal]
# AI Append
"C-ret" = [
  "extend_to_line_bounds",
  "trim_selections", # Remove \n
  "ensure_selections_forward",
  "flip_selections",
  "select_mode",
  "goto_file_start",
  ":pipe curl http://localhost:4051/text_generation --data-binary @-",
  "ensure_selections_forward",
  "normal_mode",
  "collapse_selection",
]

# Calc
"C-k" = [
  "move_char_right", # Select whole set of equations
  "goto_prev_paragraph",
  "goto_next_paragraph",
  "trim_selections", # Remove empty lines
  "extend_to_line_bounds", # Include \n
  ":pipe sd ' ?=.*\\n?\\z' '' | { x=$(cat); echo \"$x\" = \"$(kalker \"$x\" 2>&1)\"; }",
  ":append-output echo -n =", # Move cursor back to last equal sign
  "search_selection",
  "delete_selection",
  "search_prev",
]

# Typst shortcuts
[keys.normal."C-t"]
# Compile and open
"o" = ["save_selection", "select_all", ":pipe-to typst compile --root /home/timo/Documents/typst/ - /home/timo/.typst.pdf", ":run-shell-command okular /home/timo/.typst.pdf", "jump_backward"]
# Compile
"c" = ["save_selection", "select_all", ":pipe-to typst compile --root /home/timo/Documents/typst/ - /home/timo/.typst.pdf", "jump_backward"]
